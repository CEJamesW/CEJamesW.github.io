var app=window.app||{};app.res={getContent:function(url,complete,error){var xhr=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest();if(xhr){xhr.withCredentials=false;xhr.open("GET",url,false);xhr.onreadystatechange=function(){if(xhr.readyState==4&&xhr.status==200){complete(xhr.response||xhr.responseText);}};xhr.onerror=function(){error();};xhr.ontimeout=function(){error();};xhr.send();}else{error();}},loadJs:function(name,url,version,callback){var This=this;name="js."+name;if(window.localStorage){var js=localStorage.getItem(name);if(!js||js.length==0||version!=localStorage.getItem(name+".v")){console.log("download "+name);This.getContent(url,function(res){localStorage.setItem(name,JSON.stringify(res));localStorage.setItem(name+".v",version);res=res==null?"":res;This.writeJs(res);callback&&callback();},function(){This.linkJs(url);});}else{console.log("cache "+name);This.writeJs(JSON.parse(js));callback&&callback();}}else{console.log("link "+name);This.linkJs(url,callback);}},loadCss:function(name,url,version){var This=this;name="css."+name;if(window.localStorage){var css=localStorage.getItem(name);if(!css||css.length==0||version!=localStorage.getItem(name+".v")){console.log("download "+name);This.getContent(url,function(res){localStorage.setItem(name,JSON.stringify(res));localStorage.setItem(name+".v",version);res=res==null?"":res;This.writeCss(res);},function(){This.linkCss(url);});}else{console.log("cache "+name);This.writeCss(JSON.parse(css));}}else{console.log("link "+name);This.linkCss(url);}},writeJs:function(text){var link=document.createElement("script");link.innerHTML=text;document.getElementsByTagName("head").item(0).appendChild(link);},linkJs:function(url,callback){var link=document.createElement("script");link.src=url;document.getElementsByTagName("head").item(0).appendChild(link);link.onload=link.onreadystatechange=function(){if(!this.readyState||this.readyState==="loaded"||this.readyState==="complete"){callback&&callback();}};},writeCss:function(text){var link=document.createElement("style");link.type="text/css";link.innerHTML=text;document.getElementsByTagName("head").item(0).appendChild(link);},linkCss:function(url){var link=document.createElement("link");link.type="text/css";link.rel="stylesheet";link.href=url;document.getElementsByTagName("head").item(0).appendChild(link);}};
var cdn = "https://cdn.jsdelivr.net/npm/";
app.res.loadCss("aplayer", cdn + "aplayer@1.10.1/dist/APlayer.min.css", "1.10.1");
app.res.loadJs("jquery", cdn + "jquery@3.6.0/dist/jquery.min.js", "3.6.0", function () {
	app.res.loadJs("bootstrap", cdn + "bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js", "4.5.4");
	app.res.loadJs("aplayer", "https://cdn.jsdelivr.net/gh/liumingye/cdn@2.8/APlayer.js", "1.10.3");
	app.res.loadJs("hls", cdn + "hls.js@1.1.3/dist/hls.min.js", "1.1.3");
	app.res.loadJs("jszip", cdn + "jszip@3.7.1/dist/jszip.min.js", "3.7.1");
	app.res.loadJs("filesaver", cdn + "file-saver-es@2.0.5/dist/FileSaver.min.js", "2.0.5");
	app.res.loadJs("md5", cdn + "blueimp-md5@2.19.0/js/md5.min.js", "2.19.0");
	app.res.loadJs("cookie", cdn + "jquery.cookie@1.4.1/jquery.cookie.min.js", "1.4.1");
	app.res.loadJs("main", "https://cdn.jsdelivr.net/gh/liumingye/cdn/main-17D79523.js", app.version);
});